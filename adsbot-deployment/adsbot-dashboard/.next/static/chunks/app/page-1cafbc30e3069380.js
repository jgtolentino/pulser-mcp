(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{138:function(e,t,s){Promise.resolve().then(s.bind(s,2079))},2079:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var a=s(7437),i=s(2265),n=s(654),r=s(7038),c=s(3524),l=s(8799),o=s(9367),d=s(2938),m=s(7287),h=s(3298),u=s(5856),x=s(5251),g=s(2167),p=s(9891),y=s(3588);let v=s(9792).env.NEXT_PUBLIC_API_BASE||"http://localhost:3002";class f{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s="".concat(this.baseURL).concat(e),a=await fetch(s,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let i=await a.json();return{success:!0,data:i}}catch(t){return console.error("API Error [".concat(e,"]:"),t),{success:!1,error:t instanceof Error?t.message:"Unknown API error"}}}async health(){return this.request("/api/health")}async login(e){return this.request("/api/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.request("/api/auth/logout",{method:"POST"})}async profile(){return this.request("/api/auth/profile")}async getSummary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/kpi/summary?".concat(t))}async getTransactions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/kpi/transactions?".concat(t))}async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/kpi/categories?".concat(t))}async getRegions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/kpi/regions?".concat(t))}async getBrands(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/kpi/brands?".concat(t))}async getVolume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/analytics/volume?".concat(t))}async getCategoryMix(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/analytics/category-mix?".concat(t))}async getRegionalPerformance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/analytics/regional-performance?".concat(t))}async getSubstitution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/analytics/substitution?".concat(t))}async getBasketAnalysis(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/analytics/basket-analysis?".concat(t))}async getDemographics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/analytics/demographics?".concat(t))}async chatWithBot(e,t){return this.request("/api/scoutbot/query",{method:"POST",body:JSON.stringify({query:e,context:t})})}async getAIInsights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return this.request("/api/ai/insights?".concat(t))}constructor(e=v){this.baseURL=e}}let b=new f,j={health:["health"],summary:e=>["summary",e],transactions:e=>["transactions",e],categories:e=>["categories",e],regions:e=>["regions",e],brands:e=>["brands",e],volume:e=>["volume",e],categoryMix:e=>["categoryMix",e],regionalPerformance:e=>["regionalPerformance",e],substitution:e=>["substitution",e],basketAnalysis:e=>["basketAnalysis",e],demographics:e=>["demographics",e],aiInsights:e=>["aiInsights",e]},N="scoutbot-floating-singleton";function w(){let e=(0,i.useRef)(null),[t,s]=(0,i.useState)(!1),[n,r]=(0,i.useState)([{id:"1",role:"assistant",content:"Hi! I'm ScoutBot. Ask me anything about your campaigns, forecasts, or creative performance.",timestamp:new Date}]),[c,l]=(0,i.useState)(""),o=(0,i.useRef)(null),d=(0,y.D)({mutationFn:e=>{let{query:t,context:s}=e;return b.chatWithBot(t,s)}});(0,i.useEffect)(()=>{let t=document.getElementById(N);if(t&&t!==e.current){var s;null===(s=e.current)||void 0===s||s.remove();return}e.current&&(e.current.id=N)},[]);let m=()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)(()=>{m()},[n]);let p=async e=>{if(e.preventDefault(),!c.trim()||d.isPending)return;let t={id:Date.now().toString(),role:"user",content:c,timestamp:new Date};r(e=>[...e,t]),l("");try{let e=await d.mutateAsync({query:c,context:{page:"dashboard",timestamp:new Date().toISOString()}});if(e.success&&e.data){let t=e.data,s={id:(Date.now()+1).toString(),role:"assistant",content:t.answer||t.response||"I received your message.",timestamp:new Date,data:t.data};r(e=>[...e,s])}else throw Error(e.error||"Unknown error")}catch(t){let e={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};r(t=>[...t,e])}};return(0,a.jsxs)("div",{ref:e,children:[(0,a.jsx)(x.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(!t),className:"fixed bottom-6 right-6 z-50 bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:(0,a.jsx)(h.Z,{className:"h-6 w-6"})}),(0,a.jsx)(g.M,{children:t&&(0,a.jsxs)(x.E.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},transition:{type:"spring",stiffness:300,damping:25},className:"fixed bottom-24 right-6 z-50 w-96 h-[600px] bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xl",children:"\uD83E\uDD16"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:"ScoutBot"}),(0,a.jsx)("p",{className:"text-xs opacity-90",children:"AI Marketing Assistant"})]})]}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"text-white/80 hover:text-white",children:"âœ•"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[n.map(e=>(0,a.jsx)(x.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[80%] p-3 rounded-xl ".concat("user"===e.role?"bg-blue-600 text-white":"bg-white border border-gray-200"),children:[(0,a.jsx)("p",{className:"text-sm",children:e.content}),e.data&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-gray-100 rounded text-xs",children:(0,a.jsx)("pre",{className:"overflow-x-auto",children:JSON.stringify(e.data,null,2)})})]})},e.id)),d.isPending&&(0,a.jsx)(x.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-white border border-gray-200 p-3 rounded-xl",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"})]})})}),(0,a.jsx)("div",{ref:o})]}),1===n.length&&(0,a.jsxs)("div",{className:"px-4 py-2 bg-gray-100",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Try asking:"}),(0,a.jsx)("div",{className:"space-y-1",children:["Which campaign had the highest ROI last quarter?","Show me underperforming creatives","What's the forecast accuracy for Q4?","Compare engagement across campaigns"].map((e,t)=>(0,a.jsx)("button",{onClick:()=>l(e),className:"block w-full text-left text-xs p-2 rounded bg-white hover:bg-gray-50 transition-colors",children:e},t))})]}),(0,a.jsx)("form",{onSubmit:p,className:"p-4 bg-white border-t",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:c,onChange:e=>l(e.target.value),placeholder:"Ask about campaigns, forecasts, or creatives...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:d.isPending}),(0,a.jsx)("button",{type:"submit",disabled:d.isPending||!c.trim(),className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(u.Z,{className:"h-5 w-5"})})]})})]})})]})}function S(e){let{title:t,value:s,change:i,changeType:n,icon:r}=e;return(0,a.jsx)("div",{className:"dashboard-card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"metric-label",children:t}),(0,a.jsx)("p",{className:"metric-value",children:s}),(0,a.jsx)("p",{className:"text-sm ".concat({positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[n]),children:i})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-50 rounded-full",children:(0,a.jsx)(r,{className:"h-8 w-8 text-blue-600"})})]})})}function P(){var e,t,s,i;let{data:h,isLoading:u,error:x}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.a)({queryKey:j.summary(e),queryFn:()=>b.getSummary(e),staleTime:12e4,enabled:!0})}(),{data:g,isLoading:y}=(0,p.a)({queryKey:j.health,queryFn:()=>b.health(),refetchInterval:3e4,staleTime:1e4}),v=(null==h?void 0:h.success)&&h.data?h.data:null,f=(null==g?void 0:g.success)&&g.data?g.data:null,N=v?[{title:"Total Campaigns",value:(null===(e=v.totalCampaigns)||void 0===e?void 0:e.toString())||"163",change:v.campaignGrowth||"+12 this month",changeType:"positive",icon:n.Z},{title:"Avg Predicted ROI",value:v.avgROI||"3.2x",change:v.roiChange||"+15% vs target",changeType:"positive",icon:r.Z},{title:"Creative Assets",value:(null===(t=v.creativeAssets)||void 0===t?void 0:t.toString())||"163",change:v.assetStatus||"All processed",changeType:"positive",icon:c.Z},{title:"Prediction Accuracy",value:v.predictionAccuracy||"85%",change:v.accuracyChange||"+3% this quarter",changeType:"positive",icon:l.Z},{title:"Avg CTR Prediction",value:v.avgCTR||"2.8%",change:v.ctrStatus||"Within range",changeType:"neutral",icon:o.Z},{title:"Data Quality Score",value:v.dataQuality||"96%",change:v.qualityStatus||"Excellent",changeType:"positive",icon:d.Z}]:[{title:"Total Campaigns",value:"163",change:"+12 this month",changeType:"positive",icon:n.Z},{title:"Avg Predicted ROI",value:"3.2x",change:"+15% vs target",changeType:"positive",icon:r.Z},{title:"Creative Assets",value:"163",change:"All processed",changeType:"positive",icon:c.Z},{title:"Prediction Accuracy",value:"85%",change:"+3% this quarter",changeType:"positive",icon:l.Z},{title:"Avg CTR Prediction",value:"2.8%",change:"Within range",changeType:"neutral",icon:o.Z},{title:"Data Quality Score",value:"96%",change:"Excellent",changeType:"positive",icon:d.Z}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"A"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"AdsBot"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"TBWA Project Scout Intelligence"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[u?(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Loading..."}):x?(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Connection Error"}):(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Live Data Connected"}),(0,a.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:N.map((e,t)=>(0,a.jsx)(S,{...e},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Performing Campaigns"}),(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsx)("div",{className:"space-y-4",children:[{name:"Product Launch Salesforce Q4 2024",client:"Salesforce",roi:"2.68x",status:"Active"},{name:"Seasonal Expedia Q2 2024",client:"Expedia",roi:"3.01x",status:"Active"},{name:"Brand Awareness Nike Spring",client:"Nike",roi:"2.45x",status:"Completed"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.client})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold text-green-600",children:e.roi}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("Active"===e.status?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.status})]})]},t))})]}),(0,a.jsxs)("div",{className:"dashboard-card",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Prediction Model Performance"}),(0,a.jsx)(l.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"ROI Prediction"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:"87% accuracy"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"87%"}})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"CTR Prediction"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:"83% accuracy"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Engagement Rate"}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:"91% accuracy"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"91%"}})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"dashboard-card hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Forecast Analysis"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Compare predictions vs actual performance"})]})}),(0,a.jsx)("div",{className:"dashboard-card hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Creative Performance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Analyze creative asset effectiveness"})]})}),(0,a.jsx)("div",{className:"dashboard-card hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-purple-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Data Quality"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Monitor data completeness and validation"})]})}),(0,a.jsx)("div",{className:"dashboard-card hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"h-12 w-12 text-orange-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ScoutBot AI"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Ask questions about your campaigns"})]})})]})]}),(0,a.jsx)("footer",{className:"bg-white border-t mt-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat((null==f?void 0:null===(s=f.services)||void 0===s?void 0:s.database)==="connected"?"bg-green-500":"bg-red-500")}),(null==f?void 0:null===(i=f.services)||void 0===i?void 0:i.database)==="connected"?"Azure SQL Connected":"Database Disconnected"]}),(0,a.jsx)("span",{children:v?"".concat(v.totalCampaigns||163," campaigns loaded"):"163 campaigns loaded"}),(0,a.jsxs)("span",{children:["Last sync: ",(null==f?void 0:f.timestamp)?new Date(f.timestamp).toLocaleTimeString():"Just now"]})]}),(0,a.jsx)("span",{children:"TBWA Project Scout v1.0.0"})]})})}),(0,a.jsx)(w,{})]})}}},function(e){e.O(0,[735,30,971,938,744],function(){return e(e.s=138)}),_N_E=e.O()}]);